xcelente decisiÃ³n ğŸ‘Œ
Ahora lo vamos a dejar 100% transversal y reutilizable para toda la app.

La idea es:

Que ningÃºn mÃ³dulo vuelva a escribir lÃ³gica de paginaciÃ³n

Que todos usen el mismo patrÃ³n

Que el controlador solo se encargue de la consulta

Que el Paginator maneje offset, limit y render

ğŸ¯ Objetivo final

En cualquier mÃ³dulo hacer simplemente:

$total = ...;
$paginator = new Paginator($total, [
    'page' => $page,
    'per_page' => $perPage,
    'base_path' => '/modulo'
]);

$offset = $paginator->getOffset();
$limit  = $paginator->getLimit();

Y listo.

ğŸš€ PASO 1 â€” Estandarizar firma del mÃ©todo index

Todos los mÃ³dulos deben aceptar:

public function index($page = 1, $perPage = 20)

Siempre.

Eso hace que tu router sea uniforme:

$router->get('/estudiantes/([0-9]+)/([0-9]+)', '...');
$router->get('/estudiantes/', '...');
ğŸš€ PASO 2 â€” Estructura estÃ¡ndar de controlador

Todos los mÃ³dulos deberÃ­an seguir este patrÃ³n:

// ----------------------------------------------------------
// ğŸ”¹ Contar registros
// ----------------------------------------------------------
$countStmt = $this->conn->prepare("
    SELECT COUNT(*) 
    FROM estudiantes 
    WHERE empresa_id = :empresa_id
");
$countStmt->bindParam(':empresa_id', $empresaId);
$countStmt->execute();
$total = $countStmt->fetchColumn();

// ----------------------------------------------------------
// ğŸ”¹ Inicializar paginador
// ----------------------------------------------------------
$paginator = new Paginator($total, [
    'page' => $page,
    'per_page' => $perPage,
    'base_path' => '/estudiantes'
]);

$offset = $paginator->getOffset();
$limit  = $paginator->getLimit();

// ----------------------------------------------------------
// ğŸ”¹ Consulta paginada
// ----------------------------------------------------------
$stmt = $this->conn->prepare("
    SELECT *
    FROM estudiantes
    WHERE empresa_id = :empresa_id
    ORDER BY id DESC
    LIMIT :limit OFFSET :offset
");

$stmt->bindParam(':empresa_id', $empresaId);
$stmt->bindValue(':limit', $limit, PDO::PARAM_INT);
$stmt->bindValue(':offset', $offset, PDO::PARAM_INT);
$stmt->execute();

$registros = $stmt->fetchAll(PDO::FETCH_ASSOC);
ğŸš€ PASO 3 â€” Estructura estÃ¡ndar en la vista

Siempre al final del listado:

<div class="d-flex justify-content-between align-items-center mt-3">
    <?= $paginator->summary(); ?>
    <?= $paginator->render(); ?>
</div>

Y listo.



















            /*
            // Enviar el correo de confirmaciÃ³n 
            $mailController = new MailController();
            $estudiantesController = new EstudiantesController();
            $informacionEstudiante = $estudiantesController->obtenerInformacionEstudiante($estudiante_id);
            $nombreEstudiante = $informacionEstudiante['nombres'];
            $nombreEstudiante .= ' ' . $informacionEstudiante['apellidos'];
            $destinatario = $informacionEstudiante['correo'];

            // Cargar la plantilla
            $rutaPlantilla = '../modules/mail/views/plantilla_matricula.php';
            $variables = [
                'id_matricula' => $id,
                'fecha_inscripcion' => $fecha_inscripcion,
                'nombre_empresa' => $_SESSION['empresa_nombre']
            ];
            $contenidoHtml = $mailController->cargarPlantilla($rutaPlantilla, $variables);

            // Enviar correo
            $asunto = 'ConfirmaciÃ³n de MatrÃ­cula en CeaCloud';

            $mailController->sendMail($destinatario, $nombreEstudiante, $asunto, $contenidoHtml);
            // Fin Enviar el correo de confirmaciÃ³n 
            */